<div class="container">
    <a [routerLink]="" appBackNavigation class="nostyle">
        <div class="app-page-title-back">
            <i class="fas fa-long-arrow-alt-left mr-3"></i>
            {{ 'general.back.title' | translate }}
        </div>
    </a>

    <div *ngIf="banks !== undefined && banks.length > 0 && pendingWithdrawal === undefined">
        <div class="withdraw__amount">
            <div class="withdraw__title">
                {{ 'withdraw.amount_input.title' | translate }}
            </div>
            <div class="withdraw__input">
                <app-money-input-field
                        placeholder="{{ 'withdraw.amount_input.placeholder' | translate }}"
                        [(realValue)]="withdrawAmount">
                </app-money-input-field>
            </div>
        </div>

        <div class="withdraw__bank">
            <div class="bank__title">
                {{ 'withdraw.bank_picker.title' | translate }}
            </div>
            <ul class="list-group">
                <li (click)="changeActiveAccount(i)"
                    *ngFor="let bank of banks; let i = index"
                    class="list-group-item cursor-pointer">
                    {{ bank.iban }}
                    <span *ngIf="bank.alias"> - {{ bank.alias }}</span>
                    <span *ngIf="activeBankAccount === i" class="float-right">
                        <i class="fas fa-check-circle"></i>
                    </span>
                </li>
            </ul>
        </div>

        <div class="withdraw__cta">
            <button app-action-button
                    text="{{ 'withdraw.withdraw_button' | translate }}"
                    [onClick]="requestWithdrawal.bind(this)">
            </button>
        </div>
    </div>

    <div *ngIf="pendingWithdrawal !== undefined" class="wrapper">
        <div class="pending">
            <div class="pending__desc">
                <p>{{ 'withdraw.pending.notice' | translate | splitPart:0 }}</p>
                <p>{{ 'withdraw.pending.notice' | translate | splitPart:1 }}</p>
                <p>{{ 'withdraw.pending.notice' | translate | splitPart:2 }}</p>
            </div>
        </div>
        <div class="pending__info">
            <div class="card">
                <div class="card-body">
                    <span class="card-text mt-2">
                        <div>
                            {{ 'withdraw.pending.info_title' | translate | splitPart:2 }}
                        </div>
                        {{ pendingWithdrawal.amount | currencyDefault }}
                    </span>
                    <span (click)="deleteWithdrawal().subscribe()" class="float-right cursor-pointer">
                        <i class="fas fa-trash"></i>
                    </span>
                </div>
            </div>
        </div>
        <div class="pending__cta">
            <button app-action-button
                    text="{{ 'withdraw.pending.confirm_withdrawal' | translate }}"
                    loadingText="{{ 'withdraw.pending.confirm_withdrawal.loading' | translate }}"
                    [onClick]="burnWithdraw.bind(this)">
            </button>
        </div>
    </div>

    <!-- NO BANK EXISTS -->
    <div *ngIf="banks !== undefined && banks.length === 0" class="wrapper">
        <div class="empty">
            <div class="empty__title">
                {{ 'withdraw.no_bank.notice' | translate }}
            </div>
            <div class="empty__cta">
                <button class="btn btn-primary w-100" [routerLink]="'/dash/payment_options/new' | coopPath">
                    <i class="fas fa-piggy-bank mr-2"></i>
                    {{ 'withdraw.no_bank.add_bank_account' | translate }}
                </button>
            </div>
        </div>
    </div>
</div>
